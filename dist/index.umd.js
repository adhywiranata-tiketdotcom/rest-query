!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e=e||self).tixRestQuery={},e.react)}(this,function(e,t){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var n=t.createContext({store:null}),o={isLoading:!1,error:null,data:null},a={CACHE_FIRST:"cache-first",NETWORK_ONLY:"network-only",CACHE_ONLY:"cache-only"},c={key:null,cachePolicy:a.CACHE_FIRST};e.ResicacheProvider=function(e){var o=e.children,a=t.useState({}),c=a[0],i=a[1];return t.createElement(n.Provider,{value:{store:c,getCachedData:function(e){if(!c[e])return null;try{var t;return JSON.parse(null==(t=c[e])?void 0:t.data)}catch(e){return console.log("[RESTICACHE ERROR]",e),null}},setCacheData:function(e,t){var n,o=JSON.stringify(t);i(r({},c,((n={})[e]={data:o,cacheStoredAt:null,cacheExpiredAt:null},n)))}}},o)},e.useCacheable=function(e,i){void 0===i&&(i=c);var u,s,l=(u=i,s=r({},c),Object.keys(u).forEach(function(e){Object.prototype.hasOwnProperty.call(c,e)?s[e]=u[e]:console.warn("[RESTICACHE WARNING]",function(e){return"Option ["+e+"] is not part of the API. While this is not an error, ensure the options matches the API."}(e))}),s),f=t.useContext(n),h=l.key||btoa(e),d=f.getCachedData(h),y=Boolean(d),C=l.cachePolicy!==a.NETWORK_ONLY,p=[a.CACHE_FIRST,a.NETWORK_ONLY].includes(l.cachePolicy),v=y&&C,O=r({},o,{data:d}),E=t.useState(v?O:o),P=E[0],R=E[1],A=t.useCallback(function(){try{return y||!p?Promise.resolve():(R(r({},P,{isLoading:!0})),Promise.resolve(function(e){try{return Promise.resolve(window.fetch(e)).then(function(e){return Promise.resolve(e.json())})}catch(e){return Promise.reject(e)}}(e)).then(function(e){R(r({},P,{data:e})),C&&f.setCacheData(h,e)}))}catch(e){return Promise.reject(e)}},[y,p,P,e,C,f,h]);return t.useEffect(function(){A()},[]),P}});
//# sourceMappingURL=index.umd.js.map
